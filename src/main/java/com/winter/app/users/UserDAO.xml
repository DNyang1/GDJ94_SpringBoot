<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.winter.app.users.UserDAO">
	<insert id="register" parameterType="UserDTO">
		INSERT INTO users
		(username,
		password, name, email, phone, birth)
		VALUES
		(#{username}, #{password},
		#{name}, #{email}, #{phone}, #{birth})
	</insert>

	<insert id="profileAdd" parameterType="ProfileDTO">
		INSERT INTO profile
		(file_name, file_origin, username)
		VALUES
		(#{fileName}, #{fileOrigin},
		#{username})
	</insert>
	<select id="detail" parameterType="UserDTO" resultType="UserDTO">
		SELECT
		username, password, name, email, phone, birth
		FROM users
		WHERE username
		= #{username}
	</select>
	<update id="update" parameterType="UserDTO">
    UPDATE users
    SET
        name = #{name},
        email = #{email},
        phone = #{phone},
        birth = #{birth}
    WHERE username = #{username}
</update>
<update id="updateProfile" parameterType="ProfileDTO">
    UPDATE user_profile
    SET fileName = #{fileName},
        fileOrigin = #{fileOrigin}
    WHERE username = #{username}
</update>
	<select id="login" parameterType="UserDTO" resultType="UserDTO">
		SELECT
		username,
		password,
		name,
		email,
		phone,
		birth
		FROM users
		WHERE username = #{username}
		AND password = #{password}
	</select>
</mapper>